{
	"info": {
		"_postman_id": "0fbafc93-274f-4d9d-ba67-93c84006ec06",
		"name": "F5 XC Multi Cloud Training",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "17177317"
	},
	"item": [
		{
			"name": "Cloud Site Status",
			"item": [
				{
					"name": "AWS status",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"//Get vk8s cluster build status from payload response",
									"var jsonData = JSON.parse(responseBody);",
									"var jsonNamesData = jsonData.spec.site_state;",
									"console.log (jsonNamesData);",
									"",
									"if (jsonNamesData === \"ONLINE\"){",
									"    pm.test(\"Site Status: ONLINE\" , function () {",
									"        pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"    });",
									"    //console.log(\"Site Status: \"+jsonNamesData);",
									"}",
									"else { ",
									"    pm.test(\"Site Status: Not Ready\" , function () {",
									"        pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"    });",
									"    //console.log(\"Site Status: \"+jsonNamesData);",
									"    postman.setNextRequest(\"null\");",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/system/aws_vpc_sites/{{aws-site-name}}",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"system",
								"aws_vpc_sites",
								"{{aws-site-name}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "AWS2 status",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"//Get vk8s cluster build status from payload response",
									"var jsonData = JSON.parse(responseBody);",
									"var jsonNamesData = jsonData.spec.site_state;",
									"console.log (jsonNamesData);",
									"",
									"if (jsonNamesData === \"ONLINE\"){",
									"    pm.test(\"Site Status: ONLINE\" , function () {",
									"        pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"    });",
									"    //console.log(\"Site Status: \"+jsonNamesData);",
									"}",
									"else { ",
									"    pm.test(\"Site Status: Not Ready\" , function () {",
									"        pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"    });",
									"    //console.log(\"Site Status: \"+jsonNamesData);",
									"    postman.setNextRequest(\"null\");",
									"}"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/system/aws_vpc_sites/{{aws2-site-name}}",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"system",
								"aws_vpc_sites",
								"{{aws2-site-name}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Azure status",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"//Get vk8s cluster build status from payload response",
									"var jsonData = JSON.parse(responseBody);",
									"var jsonNamesData = jsonData.spec.site_state;",
									"console.log (jsonNamesData);",
									"",
									"if (jsonNamesData === \"ONLINE\"){",
									"    pm.test(\"Site Status: ONLINE\" , function () {",
									"        pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"    });",
									"    //console.log(\"Site Status: \"+jsonNamesData);",
									"}",
									"else { ",
									"    pm.test(\"Site Status: Not Ready\" , function () {",
									"        pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"    });",
									"    //console.log(\"Site Status: \"+jsonNamesData);",
									"    postman.setNextRequest(\"null\");",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/system/azure_vnet_sites/{{azure-site-name}}",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"system",
								"azure_vnet_sites",
								"{{azure-site-name}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Base Config",
			"item": [
				{
					"name": "Create namespace1",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"metadata\": {\n        \"name\": \"{{namespace_1}}\",\n        \"description\": \"\"\n    },\n    \"spec\": {}\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/web/namespaces",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"web",
								"namespaces"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "5s delay - allow namespace deploy completion",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://postman-echo.com/delay/5",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"delay",
								"5"
							]
						}
					},
					"response": []
				},
				{
					"name": "Create SPA-API WAF",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-spa-api-appwf\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"labels\": {},\n    \"annotations\": {},\n    \"description\": null,\n    \"disable\": null\n  },\n  \"spec\": {\n    \"blocking\": {},\n    \"default_detection_settings\": {},\n    \"default_bot_setting\": {},\n    \"allow_all_response_codes\": {},\n    \"default_anonymization\": {},\n    \"use_default_blocking_page\": {}\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/app_firewalls",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"app_firewalls"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create MCN site grouping label key",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"namespace\": \"shared\",\n    \"key\": \"{{app_name_1}}-sites\",\n    \"description\": null,\n    \"values\": [\n        \"all-sites\"\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/shared/known_label_key/create",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"shared",
								"known_label_key",
								"create"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create MCN site grouping label",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"namespace\": \"shared\",\n    \"key\": \"{{app_name_1}}-sites\",\n    \"value\": \"all-sites\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/shared/known_label/create",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"shared",
								"known_label",
								"create"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create Brews large workload flavor",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"{{namespace_1}}-large-flavor\",\n    \"namespace\": \"shared\",\n    \"labels\": {},\n    \"annotations\": {},\n    \"disable\": false\n  },\n  \"spec\": {\n    \"memory\": \"512\",\n    \"vcpus\": 0.25,\n    \"ephemeral_storage\": \"0\"\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/shared/workload_flavors",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"shared",
								"workload_flavors"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				}
			]
		},
		{
			"name": "vk8s & vsites",
			"item": [
				{
					"name": "Create MCN vsite (AWS+AWS2+Azure)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"{{namespace_1}}-mcn-vsite\",\n    \"labels\": {}\n  },\n  \"spec\": {\n    \"site_type\": \"CUSTOMER_EDGE\",\n    \"site_selector\": {\n      \"expressions\": [\n        \"{{app_name_1}}-sites in (all-sites)\"\n      ]\n    }\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/virtual_sites",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"virtual_sites"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create RE-only vsite (NYC+SEA)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"{{namespace_1}}-re-vsite\",\n    \"labels\": {}\n  },\n  \"spec\": {\n    \"site_type\": \"REGIONAL_EDGE\",\n    \"site_selector\": {\n      \"expressions\": [\n        \"ves.io/siteName in (ves-io-wes-sea, ves-io-ny8-nyc)\"\n      ]\n    }\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/virtual_sites",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"virtual_sites"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create Azure vsite",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"{{azure-site-name}}-vsite\",\n    \"labels\": {}\n  },\n  \"spec\": {\n    \"site_type\": \"CUSTOMER_EDGE\",\n    \"site_selector\": {\n      \"expressions\": [\n        \"ves.io/siteName in ({{azure-site-name}})\"\n      ]\n    }\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/virtual_sites",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"virtual_sites"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create AWS vsite",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"{{aws-site-name}}-vsite\",\n    \"labels\": {}\n  },\n  \"spec\": {\n    \"site_type\": \"CUSTOMER_EDGE\",\n    \"site_selector\": {\n      \"expressions\": [\n        \"ves.io/siteName in ({{aws-site-name}})\"\n      ]\n    }\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/virtual_sites",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"virtual_sites"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create AWS2 vsite",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"{{aws2-site-name}}-vsite\",\n    \"labels\": {}\n  },\n  \"spec\": {\n    \"site_type\": \"CUSTOMER_EDGE\",\n    \"site_selector\": {\n      \"expressions\": [\n        \"ves.io/siteName in ({{aws2-site-name}})\"\n      ]\n    }\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/virtual_sites",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"virtual_sites"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create vk8s cluster",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"{{app_name_1}}-vk8s\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"labels\": {},\n    \"annotations\": {},\n    \"disable\": false\n  },\n  \"spec\": {\n    \"vsite_refs\": [\n      {\n        \"namespace\": \"{{namespace_1}}\",\n        \"name\": \"{{namespace_1}}-mcn-vsite\",\n        \"kind\": \"virtual_site\"\n      }\n    ],\n    \"disabled\": {},\n    \"default_flavor_ref\": {\n      \"namespace\": \"shared\",\n      \"name\": \"{{namespace_1}}-large-flavor\",\n      \"kind\": \"workload_flavor\"\n    }\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/virtual_k8ss",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"virtual_k8ss"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "vk8s cluster status",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"//Get vk8s cluster build status from payload response",
									"var jsonData = JSON.parse(responseBody);",
									"var jsonNamesData = jsonData.items[0].system_metadata.initializers.pending[0];",
									"",
									"if (jsonNamesData !== undefined){",
									"    var vk8s_status = jsonData.items[0].system_metadata.initializers.pending[0].name;",
									"    if (vk8s_status !== undefined ) {",
									"        console.log(\"vk8s creation in progress\");",
									"        //postman.setNextRequest(\"vk8s cluster status\");",
									"        setTimeout(() => {  postman.setNextRequest(\"vk8s cluster status\"); }, 10000);",
									"    }",
									"}",
									"else { ",
									"    console.log(\"vk8s cluster ready\")",
									"    postman.setNextRequest(\"Create Container Registry - f5demos\");",
									"}",
									"",
									"pm.test(\"Successful GET request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/virtual_k8ss?report_fields",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"virtual_k8ss"
							],
							"query": [
								{
									"key": "report_fields",
									"value": null
								}
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				}
			]
		},
		{
			"name": "Workloads",
			"item": [
				{
					"name": "Create Container Registry - f5demos",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"f5demos\",\n    \"labels\": {}\n  },\n   \"spec\": {\n    \"registry\": \"f5demos.azurecr.io\",\n    \"user_name\": \"1e21992e-4283-4afe-9a89-b3b314f1fd55\",\n    \"password\": {\n      \"clear_secret_info\": {\n        \"url\": \"string:///dVUzOFF+SFZwS1RXYWU0eWVXYkxSblVwbHg2ZXprMm9xWmpNS2FWUg==\"\n      },\n      \"secret_encoding_type\": \"EncodingNone\"\n    }\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/container_registrys",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"container_registrys"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Deploy Brews Mongodb",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-mongodb\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"labels\": {},\n    \"annotations\": {},\n    \"description\": null,\n    \"disable\": null\n  },\n  \"spec\": {\n    \"service\": {\n      \"num_replicas\": 1,\n      \"containers\": [\n        {\n          \"name\": \"mongo\",\n          \"image\": {\n            \"name\": \"public.ecr.aws/o2z6z0t3/friday:demo\",\n            \"public\": {},\n            \"pull_policy\": \"IMAGE_PULL_POLICY_ALWAYS\"\n          },\n          \"init_container\": null,\n          \"flavor\": \"CONTAINER_FLAVOR_TYPE_TINY\",\n          \"liveness_check\": null,\n          \"readiness_check\": null,\n          \"command\": null,\n          \"args\": null\n        }\n      ],\n      \"volumes\": null,\n      \"configuration\": {\n        \"parameters\": [\n          {\n            \"env_var\": {\n              \"name\": \"SEED_FILE\",\n              \"value\": \"beerProducts.json\"\n            }\n          }\n        ]\n      },\n      \"deploy_options\": {\n        \"deploy_ce_virtual_sites\": {\n          \"virtual_site\": [\n            {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{aws2-site-name}}-vsite\"\n            }\n          ]\n        }\n      },\n      \"advertise_options\": {\n        \"advertise_in_cluster\": {\n          \"port\": {\n            \"info\": {\n              \"port\": 27017,\n              \"protocol\": \"PROTOCOL_TCP\",\n              \"same_as_port\": {}\n            }\n          }\n        }\n      }\n    }\n  },\n  \"resource_version\": null\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/workloads",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"workloads"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Deploy Brews SPA",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-spa\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"labels\": {},\n    \"annotations\": {},\n    \"description\": null,\n    \"disable\": null\n  },\n  \"spec\": {\n    \"service\": {\n      \"num_replicas\": 1,\n      \"containers\": [\n        {\n          \"name\": \"brews-spa\",\n          \"image\": {\n            \"name\": \"f5demos.azurecr.io/spa\",\n            \"container_registry\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"f5demos\"\n            },\n            \"pull_policy\": \"IMAGE_PULL_POLICY_ALWAYS\"\n          },\n          \"init_container\": null,\n          \"flavor\": \"CONTAINER_FLAVOR_TYPE_TINY\",\n          \"liveness_check\": null,\n          \"readiness_check\": null,\n          \"command\": null,\n          \"args\": null\n        }\n      ],\n      \"volumes\": null,\n      \"configuration\": {\n        \"parameters\": [         \n          {\n            \"env_var\": {\n              \"name\": \"MONGO_URL\",\n              \"value\": \"{{brews-mongodb-domain}}\"\n            }\n          },\n          {\n            \"env_var\": {\n              \"name\": \"INVENTORY_URL\",\n              \"value\": \"http://{{brews-inv-domain}}\"\n            }\n          },\n          {\n            \"env_var\": {\n              \"name\": \"RECOMMENDATIONS_URL\",\n              \"value\": \"https://{{brews-recs-domain}}\"\n            }\n          }\n        ]\n      },\n      \"deploy_options\": {\n        \"deploy_ce_virtual_sites\": {\n          \"virtual_site\": [\n            {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{namespace_1}}-mcn-vsite\"\n            }\n          ]\n        }\n      },\n      \"advertise_options\": {\n        \"advertise_in_cluster\": {\n          \"port\": {\n            \"info\": {\n              \"port\": 8081,\n              \"protocol\": \"PROTOCOL_TCP\",\n              \"target_port\": 80\n            }\n          }\n        }\n      }\n    }\n  },\n  \"resource_version\": null\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/workloads",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"workloads"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Deploy Brews API",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-api\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"labels\": {},\n    \"annotations\": {},\n    \"description\": null,\n    \"disable\": null\n  },\n  \"spec\": {\n    \"service\": {\n      \"num_replicas\": 1,\n      \"containers\": [\n        {\n          \"name\": \"brews-api\",\n          \"image\": {\n            \"name\": \"f5demos.azurecr.io/api\",\n            \"container_registry\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"f5demos\"\n            },\n            \"pull_policy\": \"IMAGE_PULL_POLICY_ALWAYS\"\n          },\n          \"init_container\": null,\n          \"flavor\": \"CONTAINER_FLAVOR_TYPE_TINY\",\n          \"liveness_check\": null,\n          \"readiness_check\": null,\n          \"command\": null,\n          \"args\": null\n        }\n      ],\n      \"volumes\": null,\n      \"configuration\": {\n        \"parameters\": [         \n          {\n            \"env_var\": {\n              \"name\": \"MONGO_URL\",\n              \"value\": \"{{brews-mongodb-domain}}\"\n            }\n          },\n          {\n            \"env_var\": {\n              \"name\": \"INVENTORY_URL\",\n              \"value\": \"http://{{brews-inv-domain}}\"\n            }\n          },\n          {\n            \"env_var\": {\n              \"name\": \"RECOMMENDATIONS_URL\",\n              \"value\": \"https://{{brews-recs-domain}}\"\n            }\n          }\n        ]\n      },\n      \"deploy_options\": {\n        \"deploy_ce_virtual_sites\": {\n          \"virtual_site\": [\n            {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{aws-site-name}}-vsite\"\n            }\n          ]\n        }\n      },\n      \"advertise_options\": {\n        \"advertise_in_cluster\": {\n          \"port\": {\n            \"info\": {\n              \"port\": 8000,\n              \"protocol\": \"PROTOCOL_TCP\",\n              \"same_as_port\": {}\n            }\n          }\n        }\n      }\n    }\n  },\n  \"resource_version\": null\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/workloads",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"workloads"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Deploy Brews Inventory",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"//Determine Key Type ",
									"var is_https = pm.environment.get(\"use_https\");",
									"var is_autocert = pm.environment.get(\"use_autocert\");",
									"if (is_https === \"yes\" && is_autocert === \"no\") {",
									"    var TLSkey = pm.environment.get(\"namespace_1-key\");",
									"    if (TLSkey.includes(\"-----BEGIN PRIVATE KEY-----\")) {",
									"        postman.setNextRequest(\"Deploy Brews Recommendations + HTTPS LB (manual cert - cleartext)\");",
									"    }",
									"    else {",
									"        postman.setNextRequest(\"Deploy Brews Recommendations + HTTPS LB (manual cert - blindfold)\");",
									"    }",
									"}",
									"else if (is_https === \"yes\") {",
									"    postman.setNextRequest(\"Deploy Brews Recommendations + HTTPS LB (auto cert)\");",
									"}",
									"else {",
									"    postman.setNextRequest(\"Deploy Brews Recommendations + HTTP LB\");",
									"}"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-inv\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"labels\": {},\n    \"annotations\": {},\n    \"description\": null,\n    \"disable\": null\n  },\n  \"spec\": {\n    \"service\": {\n      \"num_replicas\": 1,\n      \"containers\": [\n        {\n          \"name\": \"brews-inv\",\n          \"image\": {\n            \"name\": \"f5demos.azurecr.io/inv\",\n            \"container_registry\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"f5demos\"\n            },\n            \"pull_policy\": \"IMAGE_PULL_POLICY_ALWAYS\"\n          },\n          \"init_container\": null,\n          \"flavor\": \"CONTAINER_FLAVOR_TYPE_TINY\",\n          \"liveness_check\": null,\n          \"readiness_check\": null,\n          \"command\": null,\n          \"args\": null\n        }\n      ],\n      \"volumes\": null,\n      \"configuration\": {\n        \"parameters\": [         \n          {\n            \"env_var\": {\n              \"name\": \"MONGO_URL\",\n              \"value\": \"{{brews-mongodb-domain}}\"\n            }\n          },\n          {\n            \"env_var\": {\n              \"name\": \"INVENTORY_URL\",\n              \"value\": \"http://{{brews-inv-domain}}\"\n            }\n          },\n          {\n            \"env_var\": {\n              \"name\": \"RECOMMENDATIONS_URL\",\n              \"value\": \"https://{{brews-recs-domain}}\"\n            }\n          }\n        ]\n      },\n      \"deploy_options\": {\n        \"deploy_ce_virtual_sites\": {\n          \"virtual_site\": [\n            {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{azure-site-name}}-vsite\"\n            }\n          ]\n        }\n      },\n      \"advertise_options\": {\n        \"advertise_in_cluster\": {\n          \"port\": {\n            \"info\": {\n              \"port\": 8002,\n              \"protocol\": \"PROTOCOL_TCP\",\n              \"same_as_port\": {}\n            }\n          }\n        }\n      }\n    }\n  },\n  \"resource_version\": null\n}\n \nhas context menu",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/workloads",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"workloads"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Deploy Brews Recommendations + HTTPS LB (manual cert - cleartext)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"setTimeout(() => {  postman.setNextRequest(\"Delete Brews Recommendations deployment\"); }, 5000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-recs\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"labels\": {},\n    \"annotations\": {},\n    \"description\": null,\n    \"disable\": null\n  },\n  \"spec\": {\n    \"service\": {\n      \"num_replicas\": 1,\n      \"containers\": [\n        {\n          \"name\": \"brews-recs\",\n          \"image\": {\n            \"name\": \"f5demos.azurecr.io/recs\",\n            \"container_registry\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"f5demos\"\n            },\n            \"pull_policy\": \"IMAGE_PULL_POLICY_ALWAYS\"\n          },\n          \"init_container\": null,\n          \"flavor\": \"CONTAINER_FLAVOR_TYPE_TINY\",\n          \"liveness_check\": null,\n          \"readiness_check\": null,\n          \"command\": null,\n          \"args\": null\n        }\n      ],\n      \"volumes\": null,\n      \"configuration\": {\n        \"parameters\": [         \n          {\n            \"env_var\": {\n              \"name\": \"MONGO_URL\",\n              \"value\": \"{{brews-mongodb-domain}}\"\n            }\n          },\n          {\n            \"env_var\": {\n              \"name\": \"INVENTORY_URL\",\n              \"value\": \"http://{{brews-inv-domain}}\"\n            }\n          },\n          {\n            \"env_var\": {\n              \"name\": \"RECOMMENDATIONS_URL\",\n              \"value\": \"https://{{brews-recs-domain}}\"\n            }\n          }\n        ]\n      },\n      \"deploy_options\": {\n        \"deploy_re_virtual_sites\": {\n          \"virtual_site\": [\n            {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{namespace_1}}-re-vsite\"\n            }\n          ]\n        }\n      },\n      \"advertise_options\": {\n        \"advertise_on_public\": {\n          \"port\": {\n            \"port\": {\n              \"info\": {\n                \"port\": 8001,\n                \"protocol\": \"PROTOCOL_TCP\",\n                \"same_as_port\": {}\n              }\n            },\n            \"http_loadbalancer\": {\n              \"domains\": [\n                \"{{brews-recs-domain}}\"\n              ],\n              \"https\": {\n                \"http_redirect\": null,\n                \"add_hsts\": null,\n                \"tls_parameters\": {\n                    \"tls_config\": {\n                        \"default_security\": {}\n                    },\n                    \"tls_certificates\": [\n                        {\n                            \"certificate_url\": \"string:///{{base64EncodedCert}}\",\n                            \"private_key\": {\n                                \"clear_secret_info\": {\n                                    \"url\": \"string:///{{base64EncodedKey}}\",\n                                    \"provider\": null\n                                },\n                                \"blindfold_secret_info_internal\": null,\n                                \"secret_encoding_type\": \"EncodingNone\"\n                            },\n                            \"description\": null\n                        }\n                    ],\n                    \"no_mtls\": {}\n                },\n                \"default_header\": {}\n                },\n                \"default_route\": {\n                \"disable_host_rewrite\": {}\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  \"resource_version\": null\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/workloads",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"workloads"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Deploy Brews Recommendations + HTTPS LB (manual cert - blindfold)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"setTimeout(() => {  postman.setNextRequest(\"Delete Brews API deployment\"); }, 5000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-recs\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"labels\": {},\n    \"annotations\": {},\n    \"description\": null,\n    \"disable\": null\n  },\n  \"spec\": {\n    \"service\": {\n      \"num_replicas\": 1,\n      \"containers\": [\n        {\n          \"name\": \"brews-recs\",\n          \"image\": {\n            \"name\": \"f5demos.azurecr.io/recs\",\n            \"container_registry\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"f5demos\"\n            },\n            \"pull_policy\": \"IMAGE_PULL_POLICY_ALWAYS\"\n          },\n          \"init_container\": null,\n          \"flavor\": \"CONTAINER_FLAVOR_TYPE_TINY\",\n          \"liveness_check\": null,\n          \"readiness_check\": null,\n          \"command\": null,\n          \"args\": null\n        }\n      ],\n      \"volumes\": null,\n      \"configuration\": {\n        \"parameters\": [         \n          {\n            \"env_var\": {\n              \"name\": \"MONGO_URL\",\n              \"value\": \"{{brews-mongodb-domain}}\"\n            }\n          },\n          {\n            \"env_var\": {\n              \"name\": \"INVENTORY_URL\",\n              \"value\": \"http://{{brews-inv-domain}}\"\n            }\n          },\n          {\n            \"env_var\": {\n              \"name\": \"RECOMMENDATIONS_URL\",\n              \"value\": \"https://{{brews-recs-domain}}\"\n            }\n          }\n        ]\n      },\n      \"deploy_options\": {\n        \"deploy_re_virtual_sites\": {\n          \"virtual_site\": [\n            {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{namespace_1}}-re-vsite\"\n            }\n          ]\n        }\n      },\n      \"advertise_options\": {\n        \"advertise_on_public\": {\n          \"port\": {\n            \"port\": {\n              \"info\": {\n                \"port\": 8001,\n                \"protocol\": \"PROTOCOL_TCP\",\n                \"same_as_port\": {}\n              }\n            },\n            \"http_loadbalancer\": {\n              \"domains\": [\n                \"{{brews-recs-domain}}\"\n              ],\n            \"https\": {\n                \"http_redirect\": null,\n                \"add_hsts\": null,\n                \"tls_parameters\": {\n                    \"tls_config\": {\n                        \"default_security\": {}\n                        },\n                        \"tls_certificates\": [\n                            {\n                             \"certificate_url\": \"string:///{{base64EncodedCert}}\",\n                             \"private_key\": {\n                                 \"blindfold_secret_info\": {\n                                     \"location\": \"string:///{{namespace_1-key}}\",\n                                     \"decryption_provider\": null,\n                                     \"store_provider\": null\n                                 },\n                                 \"blindfold_secret_info_internal\": null,\n                                 \"secret_encoding_type\": null\n                             },\n                                \"description\": null\n                         }\n                        ],\n                        \"no_mtls\": {}\n                    },\n                    \"default_header\": {}\n                },\n              \"default_route\": {\n                \"disable_host_rewrite\": {}\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  \"resource_version\": null\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/workloads",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"workloads"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Deploy Brews Recommendations + HTTPS LB (auto cert)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"setTimeout(() => {  postman.setNextRequest(\"Delete Brews Recommendations deployment\"); }, 5000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-recs\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"labels\": {},\n    \"annotations\": {},\n    \"description\": null,\n    \"disable\": null\n  },\n  \"spec\": {\n    \"service\": {\n      \"num_replicas\": 1,\n      \"containers\": [\n        {\n          \"name\": \"brews-recs\",\n          \"image\": {\n            \"name\": \"f5demos.azurecr.io/recs\",\n            \"container_registry\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"f5demos\"\n            },\n            \"pull_policy\": \"IMAGE_PULL_POLICY_ALWAYS\"\n          },\n          \"init_container\": null,\n          \"flavor\": \"CONTAINER_FLAVOR_TYPE_TINY\",\n          \"liveness_check\": null,\n          \"readiness_check\": null,\n          \"command\": null,\n          \"args\": null\n        }\n      ],\n      \"volumes\": null,\n      \"configuration\": {\n        \"parameters\": [         \n          {\n            \"env_var\": {\n              \"name\": \"MONGO_URL\",\n              \"value\": \"{{brews-mongodb-domain}}\"\n            }\n          },\n          {\n            \"env_var\": {\n              \"name\": \"INVENTORY_URL\",\n              \"value\": \"http://{{brews-inv-domain}}\"\n            }\n          },\n          {\n            \"env_var\": {\n              \"name\": \"RECOMMENDATIONS_URL\",\n              \"value\": \"https://{{brews-recs-domain}}\"\n            }\n          }\n        ]\n      },\n      \"deploy_options\": {\n        \"deploy_re_virtual_sites\": {\n          \"virtual_site\": [\n            {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{namespace_1}}-re-vsite\"\n            }\n          ]\n        }\n      },\n      \"advertise_options\": {\n        \"advertise_on_public\": {\n          \"port\": {\n            \"port\": {\n              \"info\": {\n                \"port\": 8001,\n                \"protocol\": \"PROTOCOL_TCP\",\n                \"same_as_port\": {}\n              }\n            },\n            \"http_loadbalancer\": {\n              \"domains\": [\n                \"{{brews-recs-domain}}\"\n              ],\n              \"https_auto_cert\": {\n                \"http_redirect\": null,\n                \"add_hsts\": null,\n                \"port\": 443,\n                \"tls_config\": {\n                  \"default_security\": {}\n                },\n                \"no_mtls\": {},\n                \"default_header\": {},\n                \"enable_path_normalize\": {},\n                \"non_default_loadbalancer\": {}\n              },\n              \"default_route\": {\n                \"disable_host_rewrite\": {}\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  \"resource_version\": null\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/workloads",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"workloads"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Deploy Brews Recommendations + HTTP LB",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"setTimeout(() => {  postman.setNextRequest(\"Delete Brews Recommendations deployment\"); }, 5000);"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-recs\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"labels\": {},\n    \"annotations\": {},\n    \"description\": null,\n    \"disable\": null\n  },\n  \"spec\": {\n    \"service\": {\n      \"num_replicas\": 1,\n      \"containers\": [\n        {\n          \"name\": \"brews-recs\",\n          \"image\": {\n            \"name\": \"f5demos.azurecr.io/recs\",\n            \"container_registry\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"f5demos\"\n            },\n            \"pull_policy\": \"IMAGE_PULL_POLICY_ALWAYS\"\n          },\n          \"init_container\": null,\n          \"flavor\": \"CONTAINER_FLAVOR_TYPE_TINY\",\n          \"liveness_check\": null,\n          \"readiness_check\": null,\n          \"command\": null,\n          \"args\": null\n        }\n      ],\n      \"volumes\": null,\n      \"configuration\": {\n        \"parameters\": [         \n          {\n            \"env_var\": {\n              \"name\": \"MONGO_URL\",\n              \"value\": \"{{brews-mongodb-domain}}\"\n            }\n          },\n          {\n            \"env_var\": {\n              \"name\": \"INVENTORY_URL\",\n              \"value\": \"http://{{brews-inv-domain}}\"\n            }\n          },\n          {\n            \"env_var\": {\n              \"name\": \"RECOMMENDATIONS_URL\",\n              \"value\": \"http://{{brews-recs-domain}}\"\n            }\n          }\n        ]\n      },\n      \"deploy_options\": {\n        \"deploy_re_virtual_sites\": {\n          \"virtual_site\": [\n            {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{namespace_1}}-re-vsite\"\n            }\n          ]\n        }\n      },\n      \"advertise_options\": {\n        \"advertise_on_public\": {\n          \"port\": {\n            \"port\": {\n              \"info\": {\n                \"port\": 8001,\n                \"protocol\": \"PROTOCOL_TCP\",\n                \"same_as_port\": {}\n              }\n            },\n            \"http_loadbalancer\": {\n              \"domains\": [\n                \"{{brews-recs-domain}}\"\n              ],\n              \"http\": {\n                \"dns_volterra_managed\": true,\n                \"port\": 80\n              },\n              \"default_route\": {\n                \"disable_host_rewrite\": {}\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  \"resource_version\": null\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/workloads",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"workloads"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				}
			]
		},
		{
			"name": "Deployments",
			"item": [
				{
					"name": "Delete Brews Recommendations deployment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,201,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/vk8s/namespaces/{{namespace_1}}/{{app_name_1}}-vk8s/apis/apps/v1/namespaces/{{namespace_1}}/deployments/brews-recs",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"vk8s",
								"namespaces",
								"{{namespace_1}}",
								"{{app_name_1}}-vk8s",
								"apis",
								"apps",
								"v1",
								"namespaces",
								"{{namespace_1}}",
								"deployments",
								"brews-recs"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Delete Brews Inventory deployment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,201,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/vk8s/namespaces/{{namespace_1}}/{{app_name_1}}-vk8s/apis/apps/v1/namespaces/{{namespace_1}}/deployments/brews-inv",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"vk8s",
								"namespaces",
								"{{namespace_1}}",
								"{{app_name_1}}-vk8s",
								"apis",
								"apps",
								"v1",
								"namespaces",
								"{{namespace_1}}",
								"deployments",
								"brews-inv"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Delete Brews API deployment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,201,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/vk8s/namespaces/{{namespace_1}}/{{app_name_1}}-vk8s/apis/apps/v1/namespaces/{{namespace_1}}/deployments/brews-api",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"vk8s",
								"namespaces",
								"{{namespace_1}}",
								"{{app_name_1}}-vk8s",
								"apis",
								"apps",
								"v1",
								"namespaces",
								"{{namespace_1}}",
								"deployments",
								"brews-api"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Delete Brews SPA deployment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,201,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/vk8s/namespaces/{{namespace_1}}/{{app_name_1}}-vk8s/apis/apps/v1/namespaces/{{namespace_1}}/deployments/brews-spa",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"vk8s",
								"namespaces",
								"{{namespace_1}}",
								"{{app_name_1}}-vk8s",
								"apis",
								"apps",
								"v1",
								"namespaces",
								"{{namespace_1}}",
								"deployments",
								"brews-spa"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Delete Brews mongodb deployment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,201,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/vk8s/namespaces/{{namespace_1}}/{{app_name_1}}-vk8s/apis/apps/v1/namespaces/{{namespace_1}}/deployments/brews-mongodb",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"vk8s",
								"namespaces",
								"{{namespace_1}}",
								"{{app_name_1}}-vk8s",
								"apis",
								"apps",
								"v1",
								"namespaces",
								"{{namespace_1}}",
								"deployments",
								"brews-mongodb"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Deploy Brews mongodb deployment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,201,409]);",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"kind\": \"Deployment\",\n  \"apiVersion\": \"apps/v1\",\n  \"metadata\": {\n    \"name\": \"brews-mongodb\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"annotations\": {\n      \"ves.io/virtual-sites\": \"{{namespace_1}}/{{aws2-site-name}}-vsite\",\n      \"ves.io/workload-flavor-brews-api\": \"{{namespace_1}}-large-flavor\"\n    }\n  },\n  \"spec\": {\n    \"replicas\": 1,\n    \"selector\": {\n      \"matchLabels\": {\n        \"ves.io/workload\": \"brews-mongodb\"\n      }\n    },\n    \"template\": {\n      \"metadata\": {\n        \"labels\": {\n          \"ves.io/workload\": \"brews-mongodb\"\n        }\n      },\n      \"spec\": {\n        \"containers\": [\n          {\n            \"name\": \"brews-mongodb\",\n            \"image\": \"public.ecr.aws/o2z6z0t3/friday:demo\",\n            \"resources\": {},\n            \"terminationMessagePath\": \"/dev/termination-log\",\n            \"terminationMessagePolicy\": \"File\",\n            \"imagePullPolicy\": \"Always\"\n          }\n        ],\n        \"restartPolicy\": \"Always\",\n        \"terminationGracePeriodSeconds\": 30,\n        \"dnsPolicy\": \"ClusterFirst\",\n        \"securityContext\": {},\n        \"schedulerName\": \"default-scheduler\"\n      }\n    },\n    \"strategy\": {\n      \"type\": \"RollingUpdate\",\n      \"rollingUpdate\": {\n        \"maxUnavailable\": \"25%\",\n        \"maxSurge\": \"25%\"\n      }\n    },\n    \"revisionHistoryLimit\": 10,\n    \"progressDeadlineSeconds\": 600\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/vk8s/namespaces/{{namespace_1}}/{{app_name_1}}-vk8s/apis/apps/v1/namespaces/{{namespace_1}}/deployments",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"vk8s",
								"namespaces",
								"{{namespace_1}}",
								"{{app_name_1}}-vk8s",
								"apis",
								"apps",
								"v1",
								"namespaces",
								"{{namespace_1}}",
								"deployments"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Deploy Brews SPA deployment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,201,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"kind\": \"Deployment\",\n  \"apiVersion\": \"apps/v1\",\n  \"metadata\": {\n    \"name\": \"brews-spa\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"annotations\": {\n      \"ves.io/virtual-sites\": \"{{namespace_1}}/{{namespace_1}}-mcn-vsite\",\n      \"ves.io/workload-flavor-brews-api\": \"{{namespace_1}}-large-flavor\"\n    }\n  },\n  \"spec\": {\n    \"replicas\": 1,\n    \"selector\": {\n      \"matchLabels\": {\n        \"ves.io/workload\": \"brews-spa\"\n      }\n    },\n    \"template\": {\n      \"metadata\": {\n        \"labels\": {\n          \"ves.io/workload\": \"brews-spa\"\n        }\n      },\n      \"spec\": {\n        \"containers\": [\n          {\n            \"name\": \"brews-spa\",\n            \"image\": \"f5demos.azurecr.io/spa\",\n            \"env\": [\n              {\n                \"name\": \"MONGO_URL\",\n                \"value\": \"{{brews-mongodb-domain}}\"\n              },\n              {\n                \"name\": \"INVENTORY_URL\",\n                \"value\": \"http://{{brews-inv-domain}}\"\n              },\n              {\n                \"name\": \"RECOMMENDATIONS_URL\",\n                \"value\": \"https://{{brews-recs-domain}}\"\n              }\n            ],\n            \"resources\": {},\n            \"terminationMessagePath\": \"/dev/termination-log\",\n            \"terminationMessagePolicy\": \"File\",\n            \"imagePullPolicy\": \"Always\"\n          }\n        ],\n        \"restartPolicy\": \"Always\",\n        \"terminationGracePeriodSeconds\": 30,\n        \"dnsPolicy\": \"ClusterFirst\",\n        \"securityContext\": {},\n        \"imagePullSecrets\": [\n          {\n            \"name\": \"brews-spa-f5demos\"\n          }\n        ],\n        \"schedulerName\": \"default-scheduler\"\n      }\n    },\n    \"strategy\": {\n      \"type\": \"RollingUpdate\",\n      \"rollingUpdate\": {\n        \"maxUnavailable\": \"25%\",\n        \"maxSurge\": \"25%\"\n      }\n    },\n    \"revisionHistoryLimit\": 10,\n    \"progressDeadlineSeconds\": 600\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/vk8s/namespaces/{{namespace_1}}/{{app_name_1}}-vk8s/apis/apps/v1/namespaces/{{namespace_1}}/deployments",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"vk8s",
								"namespaces",
								"{{namespace_1}}",
								"{{app_name_1}}-vk8s",
								"apis",
								"apps",
								"v1",
								"namespaces",
								"{{namespace_1}}",
								"deployments"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Deploy Brews API deployment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,201,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"kind\": \"Deployment\",\n  \"apiVersion\": \"apps/v1\",\n  \"metadata\": {\n    \"name\": \"brews-api\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"annotations\": {\n      \"deployment.kubernetes.io/revision\": \"1\",\n      \"ves.io/virtual-sites\": \"{{namespace_1}}/{{aws-site-name}}-vsite\",\n      \"ves.io/workload-flavor-brews-api\": \"{{namespace_1}}-large-flavor\"\n    }\n  },\n  \"spec\": {\n    \"replicas\": 1,\n    \"selector\": {\n      \"matchLabels\": {\n        \"ves.io/workload\": \"brews-api\"\n      }\n    },\n    \"template\": {\n      \"metadata\": {\n        \"creationTimestamp\": null,\n        \"labels\": {\n          \"ves.io/workload\": \"brews-api\"\n        }\n      },\n      \"spec\": {\n        \"containers\": [\n          {\n            \"name\": \"brews-api\",\n            \"image\": \"f5demos.azurecr.io/api\",\n            \"env\": [\n              {\n                \"name\": \"MONGO_URL\",\n                \"value\": \"{{brews-mongodb-domain}}\"\n              },\n              {\n                \"name\": \"INVENTORY_URL\",\n                \"value\": \"http://{{brews-inv-domain}}\"\n              },\n              {\n                \"name\": \"RECOMMENDATIONS_URL\",\n                \"value\": \"https://{{brews-recs-domain}}\"\n              }\n            ],\n            \"resources\": {},\n            \"terminationMessagePath\": \"/dev/termination-log\",\n            \"terminationMessagePolicy\": \"File\",\n            \"imagePullPolicy\": \"Always\"\n          }\n        ],\n        \"restartPolicy\": \"Always\",\n        \"terminationGracePeriodSeconds\": 30,\n        \"dnsPolicy\": \"ClusterFirst\",\n        \"securityContext\": {},\n        \"imagePullSecrets\": [\n          {\n            \"name\": \"brews-api-f5demos\"\n          }\n        ],\n        \"schedulerName\": \"default-scheduler\"\n      }\n    },\n    \"strategy\": {\n      \"type\": \"RollingUpdate\",\n      \"rollingUpdate\": {\n        \"maxUnavailable\": \"25%\",\n        \"maxSurge\": \"25%\"\n      }\n    },\n    \"revisionHistoryLimit\": 10,\n    \"progressDeadlineSeconds\": 600\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/vk8s/namespaces/{{namespace_1}}/{{app_name_1}}-vk8s/apis/apps/v1/namespaces/{{namespace_1}}/deployments",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"vk8s",
								"namespaces",
								"{{namespace_1}}",
								"{{app_name_1}}-vk8s",
								"apis",
								"apps",
								"v1",
								"namespaces",
								"{{namespace_1}}",
								"deployments"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Deploy Brews Inventory deployment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,201,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"kind\": \"Deployment\",\n  \"apiVersion\": \"apps/v1\",\n  \"metadata\": {\n    \"name\": \"brews-inv\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"annotations\": {\n      \"ves.io/virtual-sites\": \"{{namespace_1}}/{{azure-site-name}}-vsite\",\n      \"ves.io/workload-flavor-brews-api\": \"{{namespace_1}}-large-flavor\"\n    }\n  },\n  \"spec\": {\n    \"replicas\": 1,\n    \"selector\": {\n      \"matchLabels\": {\n        \"ves.io/workload\": \"brews-inv\"\n      }\n    },\n    \"template\": {\n      \"metadata\": {\n        \"labels\": {\n          \"ves.io/workload\": \"brews-inv\"\n        }\n      },\n      \"spec\": {\n        \"containers\": [\n          {\n            \"name\": \"brews-inv\",\n            \"image\": \"f5demos.azurecr.io/inv\",\n            \"env\": [\n              {\n                \"name\": \"MONGO_URL\",\n                \"value\": \"{{brews-mongodb-domain}}\"\n              },\n              {\n                \"name\": \"INVENTORY_URL\",\n                \"value\": \"http://{{brews-inv-domain}}\"\n              },\n              {\n                \"name\": \"RECOMMENDATIONS_URL\",\n                \"value\": \"https://{{brews-recs-domain}}\"\n              }\n            ],\n            \"resources\": {},\n            \"terminationMessagePath\": \"/dev/termination-log\",\n            \"terminationMessagePolicy\": \"File\",\n            \"imagePullPolicy\": \"Always\"\n          }\n        ],\n        \"restartPolicy\": \"Always\",\n        \"terminationGracePeriodSeconds\": 30,\n        \"dnsPolicy\": \"ClusterFirst\",\n        \"securityContext\": {},\n        \"imagePullSecrets\": [\n          {\n            \"name\": \"brews-inv-f5demos\"\n          }\n        ],\n        \"schedulerName\": \"default-scheduler\"\n      }\n    },\n    \"strategy\": {\n      \"type\": \"RollingUpdate\",\n      \"rollingUpdate\": {\n        \"maxUnavailable\": \"25%\",\n        \"maxSurge\": \"25%\"\n      }\n    },\n    \"revisionHistoryLimit\": 10,\n    \"progressDeadlineSeconds\": 600\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/vk8s/namespaces/{{namespace_1}}/{{app_name_1}}-vk8s/apis/apps/v1/namespaces/{{namespace_1}}/deployments",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"vk8s",
								"namespaces",
								"{{namespace_1}}",
								"{{app_name_1}}-vk8s",
								"apis",
								"apps",
								"v1",
								"namespaces",
								"{{namespace_1}}",
								"deployments"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Deploy Brews Recommendations deployment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,201,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"kind\": \"Deployment\",\n  \"apiVersion\": \"apps/v1\",\n  \"metadata\": {\n    \"name\": \"brews-recs\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"annotations\": {\n      \"ves.io/virtual-sites\": \"{{namespace_1}}/{{namespace_1}}-re-vsite\",\n      \"ves.io/workload-flavor-brews-api\": \"{{namespace_1}}-large-flavor\"\n    }\n  },\n  \"spec\": {\n    \"replicas\": 1,\n    \"selector\": {\n      \"matchLabels\": {\n        \"ves.io/workload\": \"brews-recs\"\n      }\n    },\n    \"template\": {\n      \"metadata\": {\n        \"labels\": {\n          \"ves.io/workload\": \"brews-recs\"\n        }\n      },\n      \"spec\": {\n        \"containers\": [\n          {\n            \"name\": \"brews-recs\",\n            \"image\": \"f5demos.azurecr.io/recs\",\n            \"env\": [\n              {\n                \"name\": \"MONGO_URL\",\n                \"value\": \"{{brews-mongodb-domain}}\"\n              },\n              {\n                \"name\": \"INVENTORY_URL\",\n                \"value\": \"http://{{brews-inv-domain}}\"\n              },\n              {\n                \"name\": \"RECOMMENDATIONS_URL\",\n                \"value\": \"https://{{brews-recs-domain}}\"\n              }\n            ],\n            \"resources\": {},\n            \"terminationMessagePath\": \"/dev/termination-log\",\n            \"terminationMessagePolicy\": \"File\",\n            \"imagePullPolicy\": \"Always\"\n          }\n        ],\n        \"restartPolicy\": \"Always\",\n        \"terminationGracePeriodSeconds\": 30,\n        \"dnsPolicy\": \"ClusterFirst\",\n        \"securityContext\": {},\n        \"imagePullSecrets\": [\n          {\n            \"name\": \"brews-recs-f5demos\"\n          }\n        ],\n        \"schedulerName\": \"default-scheduler\"\n      }\n    },\n    \"strategy\": {\n      \"type\": \"RollingUpdate\",\n      \"rollingUpdate\": {\n        \"maxUnavailable\": \"25%\",\n        \"maxSurge\": \"25%\"\n      }\n    },\n    \"revisionHistoryLimit\": 10,\n    \"progressDeadlineSeconds\": 600\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/vk8s/namespaces/{{namespace_1}}/{{app_name_1}}-vk8s/apis/apps/v1/namespaces/{{namespace_1}}/deployments",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"vk8s",
								"namespaces",
								"{{namespace_1}}",
								"{{app_name_1}}-vk8s",
								"apis",
								"apps",
								"v1",
								"namespaces",
								"{{namespace_1}}",
								"deployments"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				}
			]
		},
		{
			"name": "LB + WAAP",
			"item": [
				{
					"name": "Create Mongodb Health Check",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-mongodb-hc\",\n    \"labels\": {}\n  },\n  \"spec\": {\n    \"tcp_health_check\": {\n      \"send_payload\": \"abc123\"\n    },\n    \"timeout\": 3,\n    \"interval\": 15,\n    \"unhealthy_threshold\": 1,\n    \"healthy_threshold\": 3,\n    \"jitter_percent\": 30\n  },\n  \"resource_version\": \"512132692\"\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/healthchecks",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"healthchecks"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create API Health Check",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-api-hc\",\n    \"labels\": {}\n  },\n  \"spec\": {\n    \"http_health_check\": {\n      \"use_origin_server_name\": {},\n      \"path\": \"/api/stats\",\n      \"use_http2\": false,\n      \"headers\": {},\n      \"request_headers_to_remove\": []\n    },\n    \"timeout\": 3,\n    \"interval\": 15,\n    \"unhealthy_threshold\": 1,\n    \"healthy_threshold\": 3,\n    \"jitter_percent\": 30\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/healthchecks",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"healthchecks"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create SPA Health Check",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-spa-hc\",\n    \"labels\": {}\n  },\n  \"spec\": {\n    \"http_health_check\": {\n      \"use_origin_server_name\": {},\n      \"path\": \"/products\",\n      \"use_http2\": false,\n      \"headers\": {},\n      \"request_headers_to_remove\": []\n    },\n    \"timeout\": 3,\n    \"interval\": 15,\n    \"unhealthy_threshold\": 1,\n    \"healthy_threshold\": 3,\n    \"jitter_percent\": 30\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/healthchecks",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"healthchecks"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create INV Health Check",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-inv-hc\",\n    \"labels\": {}\n  },\n  \"spec\": {\n    \"http_health_check\": {\n      \"use_origin_server_name\": {},\n      \"path\": \"/api/stats\",\n      \"use_http2\": false,\n      \"headers\": {},\n      \"request_headers_to_remove\": []\n    },\n    \"timeout\": 3,\n    \"interval\": 15,\n    \"unhealthy_threshold\": 1,\n    \"healthy_threshold\": 3,\n    \"jitter_percent\": 30\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/healthchecks",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"healthchecks"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create Mongodb Origin Pool",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-mongodb-pool\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"labels\": {},\n    \"annotations\": {},\n    \"description\": \"Brews MCN PoC\",\n    \"disable\": false\n  },\n  \"spec\": {\n    \"origin_servers\": [\n      {\n        \"k8s_service\": {\n          \"service_name\": \"brews-mongodb.{{namespace_1}}\",\n          \"site_locator\": {\n            \"virtual_site\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{aws2-site-name}}-vsite\",\n              \"kind\": \"virtual_site\"\n            }\n          },\n          \"vk8s_networks\": {}\n        },\n        \"labels\": {}\n      }\n    ],\n    \"no_tls\": {},\n    \"port\": 27017,\n    \"same_as_endpoint_port\": {},\n    \"healthcheck\": [\n      {\n        \"namespace\": \"{{namespace_1}}\",\n        \"name\": \"brews-mongodb-hc\",\n        \"kind\": \"healthcheck\"\n      }\n    ],\n    \"loadbalancer_algorithm\": \"LB_OVERRIDE\",\n    \"endpoint_selection\": \"LOCAL_PREFERRED\"\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/origin_pools",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"origin_pools"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create API Origin Pool",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-api-pool\",\n    \"labels\": {},\n    \"description\": \"Brews MCN PoC\"\n  },\n  \"spec\": {\n    \"origin_servers\": [\n      {\n        \"k8s_service\": {\n          \"service_name\": \"brews-api.{{namespace_1}}\",\n          \"site_locator\": {\n            \"virtual_site\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{aws-site-name}}-vsite\",\n              \"kind\": \"virtual_site\"\n            }\n          },\n          \"vk8s_networks\": {}\n        },\n        \"labels\": {}\n      }\n    ],\n    \"no_tls\": {},\n    \"port\": 8000,\n    \"same_as_endpoint_port\": {},\n    \"healthcheck\": [\n      {\n        \"namespace\": \"{{namespace_1}}\",\n        \"name\": \"brews-api-hc\",\n        \"kind\": \"healthcheck\"\n      }\n    ],\n    \"loadbalancer_algorithm\": \"LB_OVERRIDE\",\n    \"endpoint_selection\": \"LOCAL_PREFERRED\"\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/origin_pools",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"origin_pools"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create SPA Origin Pool",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-spa-pool\",\n    \"labels\": {},\n    \"description\": \"Brews MCN PoC\"\n  },\n  \"spec\": {\n    \"origin_servers\": [\n      {\n        \"k8s_service\": {\n          \"service_name\": \"brews-spa.{{namespace_1}}\",\n          \"site_locator\": {\n            \"virtual_site\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{namespace_1}}-mcn-vsite\",\n              \"kind\": \"virtual_site\"\n            }\n          },\n          \"vk8s_networks\": {}\n        },\n        \"labels\": {}\n      }\n    ],\n    \"no_tls\": {},\n    \"port\": 8081,\n    \"same_as_endpoint_port\": {},\n    \"healthcheck\": [\n      {\n        \"namespace\": \"{{namespace_1}}\",\n        \"name\": \"brews-spa-hc\",\n        \"kind\": \"healthcheck\"\n      }\n    ],\n    \"loadbalancer_algorithm\": \"LB_OVERRIDE\",\n    \"endpoint_selection\": \"LOCAL_PREFERRED\"\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/origin_pools",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"origin_pools"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create INV Origin Pool",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-inv-pool\",\n    \"labels\": {}\n  },\n  \"spec\": {\n    \"origin_servers\": [\n      {\n        \"k8s_service\": {\n          \"service_name\": \"brews-inv.{{namespace_1}}\",\n          \"site_locator\": {\n            \"virtual_site\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{azure-site-name}}-vsite\",\n              \"kind\": \"virtual_site\"\n            }\n          },\n          \"vk8s_networks\": {}\n        },\n        \"labels\": {}\n      }\n    ],\n    \"no_tls\": {},\n    \"port\": 8002,\n    \"same_as_endpoint_port\": {},\n    \"healthcheck\": [\n      {\n        \"namespace\": \"{{namespace_1}}\",\n        \"name\": \"brews-inv-hc\",\n        \"kind\": \"healthcheck\"\n      }\n    ],\n    \"loadbalancer_algorithm\": \"LB_OVERRIDE\",\n    \"endpoint_selection\": \"LOCAL_PREFERRED\"\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/origin_pools",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"origin_pools"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create Mongodb TCP LB (internal)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-mongodb-tcp-lb\",\n    \"namespace\": \"{{namespace_1}}\",\n    \"labels\": {},\n    \"annotations\": {},\n    \"description\": \"Brews MCN PoC\",\n    \"disable\": false\n  },\n  \"spec\": {\n    \"domains\": [\n      \"{{brews-mongodb-domain}}\"\n    ],\n    \"listen_port\": 27017,\n    \"no_sni\": {},\n    \"dns_volterra_managed\": false,\n    \"origin_pools\": [],\n    \"origin_pools_weights\": [\n      {\n        \"pool\": {\n          \"namespace\": \"{{namespace_1}}\",\n          \"name\": \"brews-mongodb-pool\",\n          \"kind\": \"origin_pool\"\n        },\n        \"weight\": 1,\n        \"priority\": 1,\n        \"endpoint_subsets\": {}\n      }\n    ],\n    \"advertise_custom\": {\n      \"advertise_where\": [\n        {\n          \"virtual_site\": {\n            \"network\": \"SITE_NETWORK_SERVICE\",\n            \"virtual_site\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{aws-site-name}}-vsite\",\n              \"kind\": \"virtual_site\"\n            }\n          },\n          \"use_default_port\": {}\n        },\n        {\n          \"virtual_site\": {\n            \"network\": \"SITE_NETWORK_SERVICE\",\n            \"virtual_site\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{azure-site-name}}-vsite\",\n              \"kind\": \"virtual_site\"\n            }\n          },\n          \"use_default_port\": {}\n        },\n        {\n          \"virtual_site\": {\n            \"network\": \"SITE_NETWORK_SERVICE\",\n            \"virtual_site\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{aws2-site-name}}-vsite\",\n              \"kind\": \"virtual_site\"\n            }\n          },\n          \"use_default_port\": {}\n        }\n      ]\n    },\n    \"hash_policy_choice_round_robin\": {},\n    \"idle_timeout\": 3600000,\n    \"retract_cluster\": {},\n    \"tcp\": {},\n    \"dns_info\": [],\n    \"downstream_tls_certificate_expiration_timestamps\": []\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/tcp_loadbalancers",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"tcp_loadbalancers"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create INV HTTP LB (internal)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"//Determine Key Type ",
									"var is_https = pm.environment.get(\"use_https\");",
									"var is_autocert = pm.environment.get(\"use_autocert\");",
									"if (is_https === \"yes\" && is_autocert === \"no\") {",
									"    var TLSkey = pm.environment.get(\"namespace_1-key\");",
									"    if (TLSkey.includes(\"-----BEGIN PRIVATE KEY-----\")) {",
									"        postman.setNextRequest(\"Create SPA-API HTTPS LB (public manual cert - cleartext)\");",
									"    }",
									"    else {",
									"        postman.setNextRequest(\"Create SPA-API HTTPS LB (public manual cert - blindfold)\");",
									"    }",
									"}",
									"else if (is_https === \"yes\") {",
									"    postman.setNextRequest(\"Create SPA-API HTTPS LB (public autocert)\");",
									"}",
									"else {",
									"    postman.setNextRequest(\"Create SPA-API HTTP LB (public)\");",
									"}"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-inv-http-lb\",\n    \"labels\": {},\n    \"description\": \"Brews PoC MCN\"\n  },\n  \"spec\": {\n    \"domains\": [\n      \"{{brews-inv-domain}}\"\n    ],\n    \"http\": {\n      \"dns_volterra_managed\": false,\n      \"port\": 80\n    },\n    \"advertise_custom\": {\n      \"advertise_where\": [\n        {\n          \"virtual_site\": {\n            \"network\": \"SITE_NETWORK_SERVICE\",\n            \"virtual_site\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{aws-site-name}}-vsite\",\n              \"kind\": \"virtual_site\"\n            }\n          },\n          \"use_default_port\": {}\n        },\n        {\n          \"virtual_site\": {\n            \"network\": \"SITE_NETWORK_SERVICE\",\n            \"virtual_site\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{azure-site-name}}-vsite\",\n              \"kind\": \"virtual_site\"\n            }\n          },\n          \"use_default_port\": {}\n        },\n        {\n          \"virtual_site\": {\n            \"network\": \"SITE_NETWORK_SERVICE\",\n            \"virtual_site\": {\n              \"namespace\": \"{{namespace_1}}\",\n              \"name\": \"{{aws2-site-name}}-vsite\",\n              \"kind\": \"virtual_site\"\n            }\n          },\n          \"use_default_port\": {}\n        }\n      ]\n    },\n    \"default_route_pools\": [\n      {\n        \"pool\": {\n          \"namespace\": \"{{namespace_1}}\",\n          \"name\": \"brews-inv-pool\",\n          \"kind\": \"origin_pool\"\n        },\n        \"weight\": 1,\n        \"priority\": 1,\n        \"endpoint_subsets\": {}\n      }\n    ],\n    \"routes\": [],\n    \"disable_waf\": {},\n    \"add_location\": false,\n    \"no_challenge\": {},\n    \"user_id_client_ip\": {},\n    \"disable_rate_limit\": {},\n    \"waf_exclusion_rules\": [],\n    \"data_guard_rules\": [],\n    \"blocked_clients\": [],\n    \"trusted_clients\": [],\n    \"ddos_mitigation_rules\": [],\n    \"service_policies_from_namespace\": {},\n    \"cookie_stickiness\": {\n      \"name\": \"brews-inv\"\n    },\n    \"multi_lb_app\": {},\n    \"disable_bot_defense\": {},\n    \"disable_api_definition\": {},\n    \"disable_ip_reputation\": {}\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/http_loadbalancers",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"http_loadbalancers"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create SPA-API HTTPS LB (public manual cert - cleartext)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"postman.setNextRequest(null);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-shop-spa-http-lb\",\n    \"labels\": {},\n    \"description\": \"brews MCN PoC\"\n  },\n  \"spec\": {\n    \"domains\": [\n      \"{{brews-spa-domain}}\"\n    ],\n    \"https\": {\n            \"http_redirect\": null,\n            \"add_hsts\": null,\n            \"tls_parameters\": {\n                \"tls_config\": {\n                    \"default_security\": {}\n                },\n                \"tls_certificates\": [\n                    {\n                        \"certificate_url\": \"string:///{{base64EncodedCert}}\",\n                        \"private_key\": {\n                            \"clear_secret_info\": {\n                                \"url\": \"string:///{{base64EncodedKey}}\",\n                                \"provider\": null\n                            },\n                            \"blindfold_secret_info_internal\": null,\n                            \"secret_encoding_type\": \"EncodingNone\"\n                        },\n                        \"description\": null\n                    }\n                ],\n                \"no_mtls\": {}\n            },\n            \"default_header\": {}\n        },\n    \"advertise_on_public_default_vip\": {},\n    \"default_route_pools\": [\n      {\n        \"pool\": {\n          \"namespace\": \"{{namespace_1}}\",\n          \"name\": \"brews-spa-pool\",\n          \"kind\": \"origin_pool\"\n        },\n        \"weight\": 1,\n        \"priority\": 1,\n        \"endpoint_subsets\": {}\n      }\n    ],\n    \"routes\": [\n      {\n        \"simple_route\": {\n          \"http_method\": \"ANY\",\n          \"path\": {\n            \"prefix\": \"/api/\"\n          },\n          \"origin_pools\": [\n            {\n              \"pool\": {\n                \"namespace\": \"{{namespace_1}}\",\n                \"name\": \"brews-api-pool\",\n                \"kind\": \"origin_pool\"\n              },\n              \"weight\": 1,\n              \"priority\": 1,\n              \"endpoint_subsets\": {}\n            }\n          ],\n          \"headers\": [],\n          \"auto_host_rewrite\": {}\n        }\n      },\n      {\n        \"simple_route\": {\n          \"http_method\": \"ANY\",\n          \"path\": {\n            \"prefix\": \"/images/\"\n          },\n          \"origin_pools\": [\n            {\n              \"pool\": {\n                \"namespace\": \"{{namespace_1}}\",\n                \"name\": \"brews-api-pool\",\n                \"kind\": \"origin_pool\"\n              },\n              \"weight\": 1,\n              \"priority\": 1,\n              \"endpoint_subsets\": {}\n            }\n          ],\n          \"headers\": [],\n          \"auto_host_rewrite\": {}\n        }\n      }\n    ],\n    \"app_firewall\": {\n      \"namespace\": \"{{namespace_1}}\",\n      \"name\": \"brews-spa-api-appwf\",\n      \"kind\": \"app_firewall\"\n    },\n    \"add_location\": true,\n    \"no_challenge\": {},\n    \"user_id_client_ip\": {},\n    \"disable_rate_limit\": {},\n    \"waf_exclusion_rules\": [],\n    \"data_guard_rules\": [],\n    \"blocked_clients\": [],\n    \"trusted_clients\": [],\n    \"ddos_mitigation_rules\": [],\n    \"service_policies_from_namespace\": {},\n    \"round_robin\": {},\n    \"disable_trust_client_ip_headers\": {},\n    \"enable_ddos_detection\": {},\n    \"enable_malicious_user_detection\": {},\n    \"enable_api_discovery\": {\n      \"enable_learn_from_redirect_traffic\": {}\n    },\n    \"disable_bot_defense\": {},\n    \"disable_api_definition\": {},\n    \"disable_ip_reputation\": {}\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/http_loadbalancers",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"http_loadbalancers"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create SPA-API HTTPS LB (public manual cert - blindfold)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"postman.setNextRequest(null);",
									"",
									"",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-shop-spa-http-lb\",\n    \"labels\": {},\n    \"description\": \"brews MCN PoC\"\n  },\n  \"spec\": {\n    \"domains\": [\n      \"{{brews-spa-domain}}\"\n    ],\n    \"https\": {\n            \"http_redirect\": null,\n            \"add_hsts\": null,\n            \"tls_parameters\": {\n                \"tls_config\": {\n                    \"default_security\": {}\n                },\n                \"tls_certificates\": [\n                    {\n                        \"certificate_url\": \"string:///{{base64EncodedCert}}\",\n                        \"private_key\": {\n                            \"blindfold_secret_info\": {\n                                \"location\": \"string:///{{namespace_1-key}}\",\n                                \"decryption_provider\": null,\n                                \"store_provider\": null\n                            },\n                            \"blindfold_secret_info_internal\": null,\n                            \"secret_encoding_type\": null\n                        },\n                        \"description\": null\n                    }\n                ],\n                \"no_mtls\": {}\n            },\n            \"default_header\": {}\n        },\n    \"advertise_on_public_default_vip\": {},\n    \"default_route_pools\": [\n      {\n        \"pool\": {\n          \"namespace\": \"{{namespace_1}}\",\n          \"name\": \"brews-spa-pool\",\n          \"kind\": \"origin_pool\"\n        },\n        \"weight\": 1,\n        \"priority\": 1,\n        \"endpoint_subsets\": {}\n      }\n    ],\n    \"routes\": [\n      {\n        \"simple_route\": {\n          \"http_method\": \"ANY\",\n          \"path\": {\n            \"prefix\": \"/api/\"\n          },\n          \"origin_pools\": [\n            {\n              \"pool\": {\n                \"namespace\": \"{{namespace_1}}\",\n                \"name\": \"brews-api-pool\",\n                \"kind\": \"origin_pool\"\n              },\n              \"weight\": 1,\n              \"priority\": 1,\n              \"endpoint_subsets\": {}\n            }\n          ],\n          \"headers\": [],\n          \"auto_host_rewrite\": {}\n        }\n      },\n      {\n        \"simple_route\": {\n          \"http_method\": \"ANY\",\n          \"path\": {\n            \"prefix\": \"/images/\"\n          },\n          \"origin_pools\": [\n            {\n              \"pool\": {\n                \"namespace\": \"{{namespace_1}}\",\n                \"name\": \"brews-api-pool\",\n                \"kind\": \"origin_pool\"\n              },\n              \"weight\": 1,\n              \"priority\": 1,\n              \"endpoint_subsets\": {}\n            }\n          ],\n          \"headers\": [],\n          \"auto_host_rewrite\": {}\n        }\n      }\n    ],\n    \"app_firewall\": {\n      \"namespace\": \"{{namespace_1}}\",\n      \"name\": \"brews-spa-api-appwf\",\n      \"kind\": \"app_firewall\"\n    },\n    \"add_location\": true,\n    \"no_challenge\": {},\n    \"user_id_client_ip\": {},\n    \"disable_rate_limit\": {},\n    \"waf_exclusion_rules\": [],\n    \"data_guard_rules\": [],\n    \"blocked_clients\": [],\n    \"trusted_clients\": [],\n    \"ddos_mitigation_rules\": [],\n    \"service_policies_from_namespace\": {},\n    \"round_robin\": {},\n    \"disable_trust_client_ip_headers\": {},\n    \"enable_ddos_detection\": {},\n    \"enable_malicious_user_detection\": {},\n    \"enable_api_discovery\": {\n      \"enable_learn_from_redirect_traffic\": {}\n    },\n    \"disable_bot_defense\": {},\n    \"disable_api_definition\": {},\n    \"disable_ip_reputation\": {}\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/http_loadbalancers",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"http_loadbalancers"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create SPA-API HTTPS LB (public autocert)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"postman.setNextRequest(null);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-shop-spa-http-lb\",\n    \"labels\": {},\n    \"description\": \"brews MCN PoC\"\n  },\n  \"spec\": {\n    \"domains\": [\n      \"{{brews-spa-domain}}\"\n    ],\n    \"https_auto_cert\": {\n      \"http_redirect\": true,\n      \"add_hsts\": true,\n      \"port\": 443,\n      \"tls_config\": {\n        \"default_security\": {}\n      },\n      \"no_mtls\": {},\n      \"default_header\": {},\n      \"enable_path_normalize\": {},\n      \"non_default_loadbalancer\": {}\n    },\n    \"advertise_on_public_default_vip\": {},\n    \"default_route_pools\": [\n      {\n        \"pool\": {\n          \"namespace\": \"{{namespace_1}}\",\n          \"name\": \"brews-spa-pool\",\n          \"kind\": \"origin_pool\"\n        },\n        \"weight\": 1,\n        \"priority\": 1,\n        \"endpoint_subsets\": {}\n      }\n    ],\n    \"routes\": [\n      {\n        \"simple_route\": {\n          \"http_method\": \"ANY\",\n          \"path\": {\n            \"prefix\": \"/api/\"\n          },\n          \"origin_pools\": [\n            {\n              \"pool\": {\n                \"namespace\": \"{{namespace_1}}\",\n                \"name\": \"brews-api-pool\",\n                \"kind\": \"origin_pool\"\n              },\n              \"weight\": 1,\n              \"priority\": 1,\n              \"endpoint_subsets\": {}\n            }\n          ],\n          \"headers\": [],\n          \"auto_host_rewrite\": {}\n        }\n      },\n      {\n        \"simple_route\": {\n          \"http_method\": \"ANY\",\n          \"path\": {\n            \"prefix\": \"/images/\"\n          },\n          \"origin_pools\": [\n            {\n              \"pool\": {\n                \"namespace\": \"{{namespace_1}}\",\n                \"name\": \"brews-api-pool\",\n                \"kind\": \"origin_pool\"\n              },\n              \"weight\": 1,\n              \"priority\": 1,\n              \"endpoint_subsets\": {}\n            }\n          ],\n          \"headers\": [],\n          \"auto_host_rewrite\": {}\n        }\n      }\n    ],\n    \"app_firewall\": {\n      \"namespace\": \"{{namespace_1}}\",\n      \"name\": \"brews-spa-api-appwf\",\n      \"kind\": \"app_firewall\"\n    },\n    \"add_location\": true,\n    \"no_challenge\": {},\n    \"user_id_client_ip\": {},\n    \"disable_rate_limit\": {},\n    \"waf_exclusion_rules\": [],\n    \"data_guard_rules\": [],\n    \"blocked_clients\": [],\n    \"trusted_clients\": [],\n    \"ddos_mitigation_rules\": [],\n    \"service_policies_from_namespace\": {},\n    \"round_robin\": {},\n    \"disable_trust_client_ip_headers\": {},\n    \"enable_ddos_detection\": {},\n    \"enable_malicious_user_detection\": {},\n    \"enable_api_discovery\": {\n      \"enable_learn_from_redirect_traffic\": {}\n    },\n    \"disable_bot_defense\": {},\n    \"disable_api_definition\": {},\n    \"disable_ip_reputation\": {}\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/http_loadbalancers",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"http_loadbalancers"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				},
				{
					"name": "Create SPA-API HTTP LB (public)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Successful POST request\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200,409]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"metadata\": {\n    \"name\": \"brews-shop-spa-http-lb\",\n    \"labels\": {},\n    \"description\": \"brews MCN PoC\"\n  },\n  \"spec\": {\n    \"domains\": [\n      \"{{brews-spa-domain}}\"\n    ],\n    \"http\": {\n      \"dns_volterra_managed\": true,\n      \"port\": 80\n    },\n    \"advertise_on_public_default_vip\": {},\n    \"default_route_pools\": [\n      {\n        \"pool\": {\n          \"namespace\": \"{{namespace_1}}\",\n          \"name\": \"brews-spa-pool\",\n          \"kind\": \"origin_pool\"\n        },\n        \"weight\": 1,\n        \"priority\": 1,\n        \"endpoint_subsets\": {}\n      }\n    ],\n    \"routes\": [\n      {\n        \"simple_route\": {\n          \"http_method\": \"ANY\",\n          \"path\": {\n            \"prefix\": \"/api/\"\n          },\n          \"origin_pools\": [\n            {\n              \"pool\": {\n                \"namespace\": \"{{namespace_1}}\",\n                \"name\": \"brews-api-pool\",\n                \"kind\": \"origin_pool\"\n              },\n              \"weight\": 1,\n              \"priority\": 1,\n              \"endpoint_subsets\": {}\n            }\n          ],\n          \"headers\": [],\n          \"auto_host_rewrite\": {}\n        }\n      },\n      {\n        \"simple_route\": {\n          \"http_method\": \"ANY\",\n          \"path\": {\n            \"prefix\": \"/images/\"\n          },\n          \"origin_pools\": [\n            {\n              \"pool\": {\n                \"namespace\": \"{{namespace_1}}\",\n                \"name\": \"brews-api-pool\",\n                \"kind\": \"origin_pool\"\n              },\n              \"weight\": 1,\n              \"priority\": 1,\n              \"endpoint_subsets\": {}\n            }\n          ],\n          \"headers\": [],\n          \"auto_host_rewrite\": {}\n        }\n      }\n    ],\n    \"app_firewall\": {\n      \"namespace\": \"{{namespace_1}}\",\n      \"name\": \"brews-spa-api-appwf\",\n      \"kind\": \"app_firewall\"\n    },\n    \"add_location\": true,\n    \"no_challenge\": {},\n    \"user_id_client_ip\": {},\n    \"disable_rate_limit\": {},\n    \"waf_exclusion_rules\": [],\n    \"data_guard_rules\": [],\n    \"blocked_clients\": [],\n    \"trusted_clients\": [],\n    \"ddos_mitigation_rules\": [],\n    \"service_policies_from_namespace\": {},\n    \"round_robin\": {},\n    \"disable_trust_client_ip_headers\": {},\n    \"enable_ddos_detection\": {},\n    \"enable_malicious_user_detection\": {},\n    \"enable_api_discovery\": {\n      \"enable_learn_from_redirect_traffic\": {}\n    },\n    \"disable_bot_defense\": {},\n    \"disable_api_definition\": {},\n    \"disable_ip_reputation\": {}\n  }\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{voltconsole-host}}.console.ves.volterra.io/api/config/namespaces/{{namespace_1}}/http_loadbalancers",
							"protocol": "https",
							"host": [
								"{{voltconsole-host}}",
								"console",
								"ves",
								"volterra",
								"io"
							],
							"path": [
								"api",
								"config",
								"namespaces",
								"{{namespace_1}}",
								"http_loadbalancers"
							]
						},
						"description": "Shared NamesSpace Sites"
					},
					"response": []
				}
			]
		}
	],
	"auth": {
		"type": "apikey",
		"apikey": [
			{
				"key": "value",
				"value": "APIToken {{api_credential}}",
				"type": "string"
			},
			{
				"key": "key",
				"value": "Authorization",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"pm.collectionVariables.set(\"base64EncodedCert\", btoa(pm.environment.get(\"namespace_1-cert\")));",
					"pm.collectionVariables.set(\"base64EncodedKey\", btoa(pm.environment.get(\"namespace_1-key\")));"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base64EncodedCert",
			"value": ""
		},
		{
			"key": "base64EncodedKey",
			"value": ""
		}
	]
}